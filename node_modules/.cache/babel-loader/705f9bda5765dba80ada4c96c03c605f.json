{"ast":null,"code":"import _regeneratorRuntime from\"/home/shivshaurya/Documents/Projects/RealTime-OCR/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/shivshaurya/Documents/Projects/RealTime-OCR/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/shivshaurya/Documents/Projects/RealTime-OCR/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/shivshaurya/Documents/Projects/RealTime-OCR/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/shivshaurya/Documents/Projects/RealTime-OCR/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/shivshaurya/Documents/Projects/RealTime-OCR/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/shivshaurya/Documents/Projects/RealTime-OCR/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FileBase64 from'react-file-base64';import{Button,Form,FormGroup,Label,FormText,Input}from\"reactstrap\";import'./upload.css';// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faInfoCircle } from '@fortawesome/free-solid-svg-icons'; \nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Upload=/*#__PURE__*/function(_Component){_inherits(Upload,_Component);var _super=_createSuper(Upload);function Upload(props){var _this;_classCallCheck(this,Upload);_this=_super.call(this,props);_this.state={confirmation:\"\",isLoading:\"\",files:\"\",Invoices:\"\",Amount:\"\",InvoiceDate:\"\",Vendor:\"\",Description:\"\"};_this.handleChane=_this.handleChane.bind(_assertThisInitialized(_this));return _this;}_createClass(Upload,[{key:\"handleChane\",value:function handleChane(event){event.preventDefault();var target=event.target;var value=target.value;var name=target.name;this.setState({name:value});}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();this.setState({confirmation:\"Uploading...\"});case 2:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"getFiles\",value:function(){var _getFiles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(files){var UID,date,targetImage,response,OCRBody;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.setState({isLoading:\"Extracting data\",files:files});UID=Math.round(1+Math.random()*(1000000-1));date={fileExt:\"png\",imageID:UID,folder:UID,img:this.state.files[0].base64};this.setState({confirmation:\"Processing...\"});_context2.next=6;return fetch('https://8jf7ct3ey4.execute-api.us-east-2.amazonaws.com/Production',{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application.json\"},body:JSON.stringify(date)});case 6:targetImage=UID+\".png\";_context2.next=9;return fetch('https://8jf7ct3ey4.execute-api.us-east-2.amazonaws.com/Production/ocr',{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application.json\"},body:JSON.stringify(targetImage)});case 9:response=_context2.sent;this.setState({confirmation:\"\"});_context2.next=13;return response.json();case 13:OCRBody=_context2.sent;console.log(\"OCRBody\",OCRBody);this.setState({Amount:OCRBody.body[0]});this.setState({Invoice:OCRBody.body[1]});this.setState({InvoiceDate:OCRBody.body[2]});case 18:case\"end\":return _context2.stop();}}},_callee2,this);}));function getFiles(_x2){return _getFiles.apply(this,arguments);}return getFiles;}()},{key:\"render\",value:function render(){var processing=this.state.confirmation;return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-6 offset-3\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-danger\",children:processing}),/*#__PURE__*/_jsx(\"h6\",{children:\"Upload Invoice\"}),/*#__PURE__*/_jsx(FormText,{color:\"muted\",children:\"PNG,JPG\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group files color\",children:/*#__PURE__*/_jsx(FileBase64,{multiple:true,onDone:this.getFiles.bind(this)})})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:/*#__PURE__*/_jsx(\"h6\",{children:\"Invoice\"})}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"Invoice\",id:\"Invoice\",required:true,value:this.state.Invoice,onChange:this.handleChane})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:/*#__PURE__*/_jsx(\"h6\",{children:\"Amount ($)\"})}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"Amount\",id:\"Amount\",required:true,value:this.state.Amount,onChange:this.handleChane})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:/*#__PURE__*/_jsx(\"h6\",{children:\"Date\"})}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"InvoiceDate\",id:\"InvoiceDate\",required:true,value:this.state.InvoiceDate,onChange:this.handleChane})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:/*#__PURE__*/_jsx(\"h6\",{children:\"Vendor\"})}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"Vendor\",id:\"Vendor\",required:true,value:this.state.Vendor,onChange:this.handleChane})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:/*#__PURE__*/_jsx(\"h6\",{children:\"Description\"})}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"Description\",id:\"Description\",required:true,value:this.state.Description,onChange:this.handleChane})]}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-lg btn-block btn-success\",children:\"Submit\"})]})})});}}]);return Upload;}(Component);export default Upload;","map":{"version":3,"sources":["/home/shivshaurya/Documents/Projects/RealTime-OCR/app/src/Upload.js"],"names":["React","Component","FileBase64","Button","Form","FormGroup","Label","FormText","Input","Upload","props","state","confirmation","isLoading","files","Invoices","Amount","InvoiceDate","Vendor","Description","handleChane","bind","event","preventDefault","target","value","name","setState","UID","Math","round","random","date","fileExt","imageID","folder","img","base64","fetch","method","headers","Accept","body","JSON","stringify","targetImage","response","json","OCRBody","console","log","Invoice","processing","handleSubmit","getFiles"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport FileBase64 from 'react-file-base64';\nimport {Button,Form,FormGroup,Label,FormText,Input} from \"reactstrap\"\n\nimport './upload.css';\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faInfoCircle } from '@fortawesome/free-solid-svg-icons'; \n\nclass Upload extends Component {\n    constructor(props) {\n        super(props);\n    \n    this.state = {\n        confirmation : \"\",\n        isLoading : \"\",\n        files : \"\",\n        Invoices : \"\",\n        Amount : \"\",\n        InvoiceDate : \"\",\n        Vendor : \"\",\n        Description : \"\"\n      }\n\n    this.handleChane = this.handleChane.bind(this);\n\n    }  \n\n    handleChane(event) {\n        event.preventDefault();\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({name:value});\n    }\n\n    async handleSubmit(event){\n        event.preventDefault();\n        this.setState({confirmation: \"Uploading...\"});\n    }\n\n    async getFiles(files){\n        this.setState({\n            isLoading: \"Extracting data\",\n            files: files\n        });\n\n    const UID = Math.round(1+ Math.random() * (1000000-1));\n    \n    var date={\n        fileExt:\"png\",\n        imageID: UID,\n        folder:UID,\n        img : this.state.files[0].base64\n    };\n\n    this.setState({confirmation: \"Processing...\"})\n    await fetch('https://8jf7ct3ey4.execute-api.us-east-2.amazonaws.com/Production',\n    {\n        method: \"POST\",\n        headers: {\n            Accept : \"application/json\",\n            \"Content-Type\": \"application.json\"\n        },\n        body : JSON.stringify(date)\n    }\n    );\n\n\n    let targetImage = UID + \".png\";\n\n    const response = await fetch(\n        'https://8jf7ct3ey4.execute-api.us-east-2.amazonaws.com/Production/ocr',\n        {\n        method: \"POST\",\n        headers: {\n            Accept : \"application/json\",\n            \"Content-Type\": \"application.json\"\n        },\n        body : JSON.stringify(targetImage)\n        }\n    );\n    this.setState({confirmation: \"\"})\n\n    const OCRBody = await response.json();\n    console.log(\"OCRBody\",OCRBody);\n\n    this.setState({Amount: OCRBody.body[0]})\n    this.setState({Invoice: OCRBody.body[1]})\n    this.setState({InvoiceDate: OCRBody.body[2]})\n\n}\n\n    \n    render() {\n        const processing= this.state.confirmation; \n        return (\n            <div className=\"row\">\n                <div className=\"col-6 offset-3\">\n                    <Form onSubmit={this.handleSubmit}>\n                        <FormGroup>\n                            <h3 className=\"text-danger\">{ processing }</h3>\n                            <h6>Upload Invoice</h6>\n                            <FormText color=\"muted\">PNG,JPG</FormText>\n                        \n\n                        <div className=\"form-group files color\">\n                            <FileBase64 multiple={true}\n                            onDone={this.getFiles.bind(this)}></FileBase64>\n                        </div>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>\n                                <h6>Invoice</h6>\n                            </Label>\n                            <Input\n                                type=\"text\"\n                                name=\"Invoice\"\n                                id=\"Invoice\"\n                                required\n                                value={this.state.Invoice}\n                                onChange = {this.handleChane}\n                                /> \n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>\n                                <h6>Amount ($)</h6>\n                            </Label>\n                            <Input\n                                type=\"text\"\n                                name=\"Amount\"\n                                id=\"Amount\"\n                                required\n                                value={this.state.Amount}\n                                onChange = {this.handleChane}\n                                />\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>\n                                <h6>Date</h6>\n                            </Label>\n                            <Input\n                                type=\"text\"\n                                name=\"InvoiceDate\"\n                                id=\"InvoiceDate\"\n                                required\n                                value={this.state.InvoiceDate}\n                                onChange = {this.handleChane}\n                                />\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>\n                                <h6>Vendor</h6>\n                            </Label>\n                            <Input\n                                type=\"text\"\n                                name=\"Vendor\"\n                                id=\"Vendor\"\n                                required\n                                value={this.state.Vendor}\n                                onChange = {this.handleChane}\n                                />\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>\n                                <h6>Description</h6>\n                            </Label>\n                            <Input\n                                type=\"text\"\n                                name=\"Description\"\n                                id=\"Description\"\n                                required\n                                value={this.state.Description}\n                                onChange = {this.handleChane}\n                                />\n                        </FormGroup>\n                        <Button className=\"btn btn-lg btn-block btn-success\">\n                            Submit\n                        </Button>\n                    </Form>\n                </div>\n            </div>\n        );\n    }\n}\n \nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}